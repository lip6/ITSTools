<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.0"?>
<fragment>
   <extension
         point="fr.lip6.move.coloane.core.formalisms">
      <Formalism
            extension="tpn"
            fkname="Time Petri Net"
            id="Time Petri Net"
            image="resources/clock.png"
            name="Time Petri Net">
         <XmlDescription>
            <Graph
                  name="TPN">
               <Attribute
                     bold="true"
                     drawable="true"
                     multiline="false"
                     name="title">
               </Attribute>
               <Attribute
                     drawable="true"
                     multiline="true"
                     name="authors">
               </Attribute>
               <Attribute
                     drawable="true"
                     multiline="true"
                     name="comments">
               </Attribute>
               <Node
                     container="false"
                     name="place">
                  <GraphicInfo
                        associatedFigure="fr.lip6.move.coloane.core.ui.figures.nodes.PlaceNode"
                        description="Create a place"
                        drawable="true"
                        fill="false"
                        height="18"
                        icon16px="resources/formalisms/tpn/place_16.png"
                        icon24px="resources/formalisms/tpn/place_24.png"
                        palettable="true"
                        paletteName="Place"
                        width="18">
                  </GraphicInfo>
                  <Attribute
                        bold="true"
                        delta_x="20"
                        delta_y="0"
                        drawable="true"
                        italic="false"
                        multiline="false"
                        name="name">
                     <AttributeChecker
                           class_condition="fr.lip6.move.coloane.core.formalisms.checkers.EmptyAttributeChecker"
                           message="Place has no name"
                           name="Empty name"
                           severity="Warning">
                     </AttributeChecker>
                  </Attribute>
                  <Attribute
                        bold="true"
                        default="0"
                        delta_x="0"
                        delta_y="0"
                        drawable="false"
                        italic="false"
                        multiline="false"
                        name="marking">
                     <AttributeChecker
                           class_condition="fr.lip6.move.coloane.projects.its.syntax.tpn.IntegerExpressionCheck"
                           message="fr.lip6.move.coloane.fragments.formalisms.tpn.AttributeChecker2"
                           name="Integer expression as marking."
                           severity="Error">
                     </AttributeChecker>
                  </Attribute>
                  <Attribute
                        displayed_default="false"
                        drawable="false"
                        multiline="false"
                        name="component">
                  </Attribute>
                  <ComputedAttribute
                        bold="true"
                        default="0"
                        delta_x="20"
                        delta_y="12"
                        displayed_default="false"
                        formatter="fr.lip6.move.coloane.core.ui.figures.formatters.MarkingFormatter"
                        italic="false"
                        name="markingVisual">
                  </ComputedAttribute>
               </Node>
               <Node
                     container="false"
                     name="transition">
                  <GraphicInfo
                        associatedFigure="fr.lip6.move.coloane.core.ui.figures.nodes.TPNTransition"
                        description="Create a transition"
                        drawable="true"
                        fill="false"
                        height="10"
                        icon16px="resources/formalisms/tpn/transition_16.png"
                        icon24px="resources/formalisms/tpn/transition_24.png"
                        palettable="true"
                        paletteName="Transition"
                        width="20">
                  </GraphicInfo>
                  <Attribute
                        bold="true"
                        delta_x="20"
                        delta_y="0"
                        drawable="true"
                        italic="false"
                        multiline="false"
                        name="label">
                  </Attribute>
                  <Attribute
                        bold="false"
                        default="private"
                        delta_x="-40"
                        delta_y="0"
                        drawable="false"
                        enumerated="true"
                        italic="true"
                        multiline="false"
                        name="visibility">
                     <EnumerationValue
                           name="private">
                     </EnumerationValue>
                     <EnumerationValue
                           name="public">
                     </EnumerationValue>
                  </Attribute>
                  <Attribute
                        bold="true"
                        default="0"
                        displayed_default="true"
                        drawable="false"
                        multiline="false"
                        name="earliestFiringTime">
                     <AttributeChecker
                           class_condition="fr.lip6.move.coloane.projects.its.syntax.tpn.IntegerExpressionCheck"
                           message="fr.lip6.move.coloane.fragments.formalisms.tpn.AttributeChecker2"
                           name="Integer expression as earliestFiringTime."
                           severity="Error">
                     </AttributeChecker>
                  </Attribute>
                  <Attribute
                        bold="true"
                        default="inf"
                        drawable="false"
                        italic="true"
                        multiline="false"
                        name="latestFiringTime">
                     <AttributeChecker
                           class_condition="fr.lip6.move.coloane.projects.its.syntax.tpn.IntegerExpressionCheck"
                           message="fr.lip6.move.coloane.fragments.formalisms.tpn.AttributeChecker2"
                           name="Integer expression as latestFiringTime."
                           severity="Error">
                     </AttributeChecker>
                  </Attribute>
                  <ComputedAttribute
                        bold="true"
                        delta_x="20"
                        delta_y="20"
                        formatter="fr.lip6.move.coloane.core.ui.figures.formatters.TimeFormatter"
                        name="firingTime">
                  </ComputedAttribute>
                  <Attribute
                        displayed_default="false"
                        drawable="false"
                        multiline="false"
                        name="component">
                  </Attribute>
                  <NodeChecker
                        class_condition="fr.lip6.move.coloane.projects.its.syntax.tpn.EftBeforeLft"
                        message="Earliest firing time should be higher or equal to latest firing time."
                        name="Earliest firing time before latest"
                        severity="Error">
                  </NodeChecker>
               </Node>
               <Arc
                     name="arc">
                  <GraphicInfo
                        associatedFigure="fr.lip6.move.coloane.core.ui.figures.arcs.DirectedArc"
                        description="Create an simple arc"
                        drawable="true"
                        icon16px="resources/formalisms/tpn/arc_16.png"
                        icon24px="resources/formalisms/tpn/arc_24.png"
                        palettable="true"
                        paletteName="Arc">
                  </GraphicInfo>
                  <Attribute
                        bold="false"
                        default="1"
                        drawable="true"
                        italic="false"
                        multiline="false"
                        name="valuation">
                     <AttributeChecker
                           class_condition="fr.lip6.move.coloane.projects.its.syntax.tpn.IntegerExpressionCheck"
                           message="fr.lip6.move.coloane.fragments.formalisms.tpn.AttributeChecker2"
                           name="Integer expression as arc valuation."
                           severity="Error">
                     </AttributeChecker>
                  </Attribute>
               </Arc>
               <Arc
                     name="inhibitor">
                  <GraphicInfo
                        associatedFigure="fr.lip6.move.coloane.core.ui.figures.arcs.InhibitorArc"
                        description="Create a logical inhibitor arc"
                        drawable="true"
                        icon16px="resources/formalisms/tpn/inhibitor_16.png"
                        icon24px="resources/formalisms/tpn/inhibitor_24.png"
                        palettable="true"
                        paletteName="InhibitorArc">
                  </GraphicInfo>
                  <Attribute
                        default="1"
                        drawable="true"
                        multiline="false"
                        name="valuation">
                     <AttributeChecker
                           class_condition="fr.lip6.move.coloane.projects.its.syntax.tpn.IntegerExpressionCheck"
                           message="fr.lip6.move.coloane.fragments.formalisms.tpn.AttributeChecker2"
                           name="Integer expression as inhibitor arc value."
                           severity="Error">
                     </AttributeChecker>
                  </Attribute>
               </Arc>
               <Arc
                     name="test">
                  <GraphicInfo
                        associatedFigure="fr.lip6.move.coloane.core.ui.figures.arcs.TestArc"
                        description="Create a test arc (a.k.a read arc)"
                        drawable="true"
                        icon16px="resources/formalisms/tpn/test_16.png"
                        icon24px="resources/formalisms/tpn/test_24.png"
                        palettable="true"
                        paletteName="Test Arc">
                  </GraphicInfo>
                  <Attribute
                        default="1"
                        drawable="true"
                        multiline="true"
                        name="valuation">
                     <AttributeChecker
                           class_condition="fr.lip6.move.coloane.projects.its.syntax.tpn.IntegerExpressionCheck"
                           message="fr.lip6.move.coloane.fragments.formalisms.tpn.AttributeChecker2"
                           name="Integer expression as test arc valuation."
                           severity="Error">
                     </AttributeChecker>
                  </Attribute>
               </Arc>
               <Arc
                     name="reset">
                  <GraphicInfo
                        associatedFigure="fr.lip6.move.coloane.core.ui.figures.arcs.ResetArc"
                        description="Create a reset arc"
                        drawable="true"
                        icon16px="resources/formalisms/tpn/reset_16.png"
                        icon24px="resources/formalisms/tpn/reset_24.png"
                        palettable="true"
                        paletteName="Reset Arc">
                  </GraphicInfo>
               </Arc>
            </Graph>
            <Constraint
                  link="true"
                  name="ArcRulePP"
                  type="fr.lip6.move.coloane.interfaces.formalism.constraints.ConnectionConstraint">
               <parameter
                     name="source"
                     value="place">
               </parameter>
               <parameter
                     name="target"
                     value="place">
               </parameter>
            </Constraint>
            <Constraint
                  link="true"
                  name="ArcRuleTT"
                  type="fr.lip6.move.coloane.interfaces.formalism.constraints.ConnectionConstraint">
               <parameter
                     name="source"
                     value="transition">
               </parameter>
               <parameter
                     name="target"
                     value="transition">
               </parameter>
            </Constraint>
            <Constraint
                  link="true"
                  name="InhibitorConstraint"
                  type="fr.lip6.move.coloane.interfaces.formalism.constraints.ConnectionConstraint">
               <parameter
                     name="arcType"
                     value="inhibitor">
               </parameter>
               <parameter
                     name="target"
                     value="place">
               </parameter>
               <parameter
                     name="source"
                     value="transition">
               </parameter>
            </Constraint>            
            <Constraint
                  link="true"
                  name="TestConstraint"
                  type="fr.lip6.move.coloane.interfaces.formalism.constraints.ConnectionConstraint">
               <parameter
                     name="arcType"
                     value="test">
               </parameter>
               <parameter
                     name="target"
                     value="place">
               </parameter>
               <parameter
                     name="source"
                     value="transition">
               </parameter>
            </Constraint>            
            <Constraint
                  link="true"
                  name="ResetConstraint"
                  type="fr.lip6.move.coloane.interfaces.formalism.constraints.ConnectionConstraint">
               <parameter
                     name="arcType"
                     value="reset">
               </parameter>
               <parameter
                     name="target"
                     value="place">
               </parameter>
               <parameter
                     name="source"
                     value="transition">
               </parameter>
            </Constraint>            
              </XmlDescription>               
      </Formalism>
   </extension>
</fragment>
